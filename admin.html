<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<title>ALBAY STEPS • Admin</title>
<style>
body{background:#000;color:#fff;font-family:Arial;padding:20px}
.card{background:#111;padding:15px;border-radius:12px;margin-bottom:12px}
button{padding:8px 12px;border:none;background:#e11d2e;color:#fff;border-radius:8px;margin-top:8px}
</style>
</head>
<body>
<h2>Çekim İstekleri</h2>
<div id="list">Yükleniyor...</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getFirestore, collection, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyAEQy9wEnip-cIsBRUdm6raL_uTkwxQVC8",
  authDomain:"albay-steps.firebaseapp.com",
  projectId:"albay-steps"
};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

async function load(){
 const q=await getDocs(collection(db,"withdrawRequests"));
 let html="";
 q.forEach(r=>{
  const d=r.data();
  html+=`
   <div class="card">
     <b>${d.email}</b><br>
     Tutar: ${d.amount}₺<br>
     IBAN: ${d.iban}<br>
     <button onclick="confirmReq('${r.id}')">Onayla</button>
   </div>`;
 });
 document.getElementById("list").innerHTML=html||"İstek yok";
}
window.confirmReq=async function(id){
 await deleteDoc(doc(db,"withdrawRequests",id));
 alert("Onaylandı ✅ Bankadan elle gönder.");
 load();
}
load();
</script>
</body>
</html>
