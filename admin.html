<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ALBAY STEPS • Admin</title>
<style>
  :root{--bg:#0b0b0b;--card:#141414;--red:#e01111;--txt:#f2f2f2;--muted:#b9b9b9;--ok:#12c24a;}
  *{box-sizing:border-box;font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial;}
  body{margin:0;background:var(--bg);color:var(--txt)}
  .wrap{min-height:100dvh;display:grid;place-items:center;padding:20px}
  .card{width:min(620px,94%);background:var(--card);border-radius:18px;padding:28px;box-shadow:0 14px 40px rgba(0,0,0,.4)}
  h1{margin:0 0 6px;font-size:26px}
  .muted{color:var(--muted);margin:0 0 16px}
  label{display:block;color:var(--muted);font-size:14px;margin:12px 0 6px}
  input{width:100%;padding:14px 16px;background:#0f0f0f;border:1px solid #262626;border-radius:12px;color:var(--txt);outline:none}
  .row{display:grid;grid-template-columns:1fr 160px;gap:10px}
  button{width:100%;margin-top:16px;padding:13px 16px;border:0;border-radius:12px;background:var(--red);color:#fff;font-weight:800;font-size:15px;cursor:pointer}
  .ok{background:var(--ok)}
  .out{margin-top:14px;min-height:22px;color:var(--muted)}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ADMİN PANEL</h1>
      <p class="muted">E-posta bakiyesi ekle/çıkar. (Çıkarmak için miktarı negatif gir: örn <b>-25</b>)</p>

      <label for="email">E-posta</label>
      <input id="email" type="email" placeholder="ornek@mail.com" autocomplete="email" />

      <div class="row">
        <div>
          <label for="amount">Miktar</label>
          <input id="amount" type="number" step="0.01" placeholder="örn: 50" />
        </div>
        <div>
          <button id="add" class="ok">Bakiye Güncelle</button>
        </div>
      </div>

      <button id="check">Bakiyeyi Kontrol Et</button>

      <div id="out" class="out">—</div>
    </div>
  </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbw30Z8TEJOyV_zB63qvhKSknjKzb8_fvReEU9O0nWL7A7wo1b5wKMMCcsP5AHK6NdK0/exec";
const $ = (q)=>document.querySelector(q);
const out = $("#out");

$("#check").onclick = async ()=>{
  const email = $("#email").value.trim();
  if(!email){ out.textContent = "E-posta giriniz."; return; }
  out.textContent = "Kontrol ediliyor...";
  try{
    const r = await fetch(`${API_URL}?email=${encodeURIComponent(email)}`);
    const txt = await r.text();
    const val = isNaN(parseFloat(txt)) ? 0 : parseFloat(txt);
    out.textContent = `Güncel bakiye: ${val}`;
  }catch(e){ out.textContent = "Hata: Bağlanılamadı."; }
};

$("#add").onclick = async ()=>{
  const email = $("#email").value.trim();
  const amount = parseFloat($("#amount").value);
  if(!email){ out.textContent = "E-posta giriniz."; return; }
  if(isNaN(amount)){ out.textContent = "Miktar giriniz."; return; }
  out.textContent = "Güncelleniyor...";
  try{
    const form = new FormData();
    form.append("email", email);
    form.append("amount", amount);
    const r = await fetch(API_URL, { method:"POST", body: form });
    const txt = await r.text();
    const val = isNaN(parseFloat(txt)) ? txt : parseFloat(txt);
    out.textContent = `Yeni bakiye: ${val}`;
  }catch(e){ out.textContent = "Hata: Güncelleme yapılamadı."; }
};
</script>
</body>
</html>
