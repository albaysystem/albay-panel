<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ALBAY STEPS • Admin</title>
  <style>
    :root{--bg:#0b0b0d;--card:#121317;--red:#d21414}
    *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    body{margin:0;background:var(--bg);color:#fff;display:grid;place-items:center;min-height:100dvh}
    .card{width:min(92vw,560px);background:var(--card);padding:28px;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35);border:1px solid #1e1f26}
    h1{margin:6px 0 18px;font-size:30px;text-align:center;color:var(--red)}
    .row{display:flex;gap:12px}
    label{display:block;font-size:13px;color:#bdbdbd;margin-top:10px}
    input{width:100%;margin-top:6px;background:#0e0f13;color:#fff;border:1px solid #1f2027;padding:14px 16px;border-radius:12px;outline:none;font-size:16px}
    button{width:100%;margin-top:16px;background:var(--red);border:none;color:#fff;padding:14px 16px;font-size:16px;border-radius:12px;cursor:pointer;font-weight:700}
    .muted{margin-top:10px;color:#b4b4b4;font-size:14px;text-align:center}
    .ok{color:#88ff9a}
    .err{color:#ff8a8a}
  </style>
</head>
<body>
  <div class="card">
    <h1>ADMİN PANEL</h1>

    <label for="email">Kullanıcı e-postası</label>
    <input id="email" type="email" placeholder="ornek@mail.com" />

    <label for="amount">Eklenecek miktar (pozitif ya da negatif)</label>
    <input id="amount" type="number" step="0.01" placeholder="örn. 10" />

    <button id="btn">Bakiye Güncelle</button>

    <div id="status" class="muted">Hazır ✅</div>
  </div>

<script>
const API = "https://script.google.com/macros/s/AKfycbyB8DQEXf2LlwA0wPQl0j72c-Z5mP02uRxTeaQfizoFo_llfMLcpM2H9pRdbppGIg9y/exec";

const $ = (s)=>document.querySelector(s);
const emailEl = $("#email");
const amountEl = $("#amount");
const btn = $("#btn");
const statusEl = $("#status");

btn.addEventListener("click", async () => {
  const email = (emailEl.value || "").trim();
  const amount = Number((amountEl.value || "0").trim());

  if(!email){ emailEl.focus(); return; }
  if(!isFinite(amount)){ amountEl.focus(); return; }

  btn.disabled = true;
  statusEl.textContent = "Gönderiliyor...";

  try{
    const body = new URLSearchParams({ email, amount: String(amount) }).toString();
    const res = await fetch(API, {
      method:"POST",
      headers:{ "Content-Type":"application/x-www-form-urlencoded;charset=UTF-8" },
      body
    });
    const text = await res.text(); // Apps Script yeni bakiyeyi döndürüyor

    statusEl.innerHTML = `<span class="ok">Başarılı.</span> Yeni bakiye: <b>${text}</b>`;
    amountEl.value = "";
  }catch(e){
    statusEl.innerHTML = `<span class="err">Hata:</span> Sunucuya ulaşılamadı.`;
  }finally{
    btn.disabled = false;
  }
});
</script>
</body>
</html>
