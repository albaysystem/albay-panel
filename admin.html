<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ALBAY STEPS • Admin Panel</title>
  <style>
    body{background:#000;color:#fff;font-family:Arial,Helvetica,sans-serif;margin:0}
    .wrap{max-width:560px;margin:40px auto;padding:20px;background:#111;border-radius:14px}
    h1{font-size:22px;text-align:center;margin:0 0 16px}
    label{display:block;margin:12px 0 6px;color:#bbb;font-size:13px}
    input,button{width:100%;padding:12px;border:none;border-radius:8px}
    input{background:#191919;color:#fff;border:1px solid #2b2b2b}
    .row{display:flex;gap:10px}
    .row > *{flex:1}
    .badge{display:inline-block;background:#181818;border:1px solid #333;padding:10px 14px;border-radius:10px;margin-top:8px}
    button{background:#e30606;color:#fff;font-weight:700;margin-top:10px;cursor:pointer}
    .muted{color:#8a8a8a;font-size:12px;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ALBAY STEPS • Admin Panel</h1>

    <label>Kullanıcı (Telefon / Email)</label>
    <input id="email" placeholder="9055... veya email" />

    <div class="row">
      <button id="showBtn">Bakiyeyi Göster</button>
      <div class="badge">Bakiye: <span id="bal">0</span> ₺</div>
    </div>

    <label>Yeni Bakiye (tam sayı)</label>
    <input id="amount" type="number" placeholder="Örn: 50" />

    <button id="applyBtn">Bakiye Ekle/Düş (SET)</button>

    <p class="muted">Not: Bu panel mevcut Apps Script uç noktalarıyla çalışır: <b>balance</b>, <b>admin</b>. (Çekim listesi göstermek istersen, script’e ayrıca <code>withdraws=1</code> listelemesi ekleyebiliriz.)</p>
  </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyueArV7uzUNeX0Qz3I22CXbvKyeOf6lNvdWiBMJM0FRNwYAUSTFM-0ObNEdHw0S8rE/exec";
    const $ = id => document.getElementById(id);

    async function showBalance(){
      const email = $("email").value.trim();
      if(!email){ alert("Kullanıcı gir."); return; }
      const res = await fetch(`${API_URL}?balance=1&email=${encodeURIComponent(email)}`);
      $("bal").textContent = await res.text();
    }

    async function applyBalance(){
      const email = $("email").value.trim();
      const amount = $("amount").value.trim();
      if(!email || amount===""){ alert("Kullanıcı ve yeni bakiye gerekli."); return; }
      const res = await fetch(`${API_URL}?admin=1&email=${encodeURIComponent(email)}&amount=${encodeURIComponent(amount)}`);
      const msg = await res.text();
      alert("Sonuç: " + msg);
      await showBalance();
    }

    $("showBtn").onclick = showBalance;
    $("applyBtn").onclick = applyBalance;
  </script>
</body>
</html>
