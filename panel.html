<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ALBAY STEPS • Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{background:#000;color:#fff;font-family:Arial;text-align:center;margin:0;}
.container{max-width:520px;margin:auto;background:#111;padding:20px;border-radius:12px;margin-top:40px;}
input,button{width:100%;padding:12px;border:none;border-radius:6px;margin-top:10px;}
button{background:#ff0000;color:#fff;font-weight:bold;}
</style>
</head>
<body>

<div class="container">
<h2>ALBAY STEPS • Panel</h2>
<p id="balance">Bakiye: 0 ₺</p>
<button onclick="loadBalance()">Bakiyeyi Yenile</button>

<h3>Para Çekme Talebi</h3>
<input type="text" id="iban" placeholder="TR IBAN">
<input type="number" id="amount" placeholder="Tutar">
<button onclick="sendWithdraw()">Talep Gönder</button>

<button onclick="logout()">Çıkış Yap</button>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyswecnhUaWo4p3QnskqW6smzi4M8v8ggICy81pFsJ4mbraOSEV3VNcrMThjPgUiH64/exec";

const email = localStorage.getItem("user");
if(!email){ location.href="index.html"; }

function loadBalance(){
 fetch(API_URL + `?email=${email}`)
 .then(r=>r.text()).then(b=>document.getElementById("balance").innerHTML="Bakiye: "+b+" ₺");
}

function sendWithdraw(){
 let iban = document.getElementById("iban").value;
 let amount = document.getElementById("amount").value;
 fetch(API_URL + `?withdraw=1&email=${email}&iban=${iban}&amount=${amount}`)
 .then(r=>r.text()).then(alert);
}

function logout(){ localStorage.removeItem("user"); location.href="index.html"; }
loadBalance();
</script>

</body>
</html>
