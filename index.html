<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ALBAY STEPS</title>
<style>
body {
  background: #000;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 40px;
}
input, button {
  width: 80%;
  padding: 14px;
  border-radius: 10px;
  border: none;
  margin-top: 10px;
}
button {
  background: #ff3131;
  color: white;
  font-weight: bold;
  font-size: 18px;
}
.balance-box {
  margin-top: 25px;
  font-size: 20px;
}
</style>
</head>

<body>
<h1>ALBAY STEPS</h1>

<input type="email" id="email" placeholder="Email adresini yaz">
<button id="checkBalance">Bakiyemi Göster</button>

<div class="balance-box" id="balanceText">Bakiyen: 0 ₺</div>

<button id="withdrawBtn" style="margin-top:30px;">Para Çek</button>

<div id="withdrawForm" style="display:none; margin-top:20px;">
  <input type="text" id="iban" placeholder="IBAN TR...">
  <input type="number" id="withdrawAmount" placeholder="Çekilecek Tutar">
  <button id="sendWithdraw" style="background:#fff; color:#000;">Talep Gönder</button>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbxPnjJLUmjyQ0CtFC04rpksLujxUmDyyXYsIbRtRmF3Y8Q93a5i1GnkqCARsnFNRqOE/exec";

document.getElementById("checkBalance").onclick = () => {
  const email = document.getElementById("email").value;
  fetch(API + `?email=${email}`)
    .then(r => r.text())
    .then(balance => {
      document.getElementById("balanceText").innerHTML = "Bakiyen: " + balance + " ₺";
    });
};

document.getElementById("withdrawBtn").onclick = () => {
  document.getElementById("withdrawForm").style.display = "block";
};

document.getElementById("sendWithdraw").onclick = () => {
  const email = document.getElementById("email").value;
  const iban = document.getElementById("iban").value;
  const amount = document.getElementById("withdrawAmount").value;

  fetch(API + `?withdraw=1&email=${email}&iban=${iban}&amount=${amount}`)
    .then(r => r.text())
    .then(() => {
      alert("✅ Talebin gönderildi. Onay bekleniyor.");
    });
};
</script>

</body>
</html>
