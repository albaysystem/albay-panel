<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ALBAY STEPS • Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{background:#000;color:#fff;font-family:Arial;text-align:center;margin:0;}
.container{max-width:500px;margin:auto;background:#111;padding:20px;border-radius:12px;margin-top:40px;}
button{width:100%;padding:12px;border:none;border-radius:6px;background:#ff0000;color:#fff;font-weight:bold;margin-top:10px;}
input{width:100%;padding:12px;border:none;border-radius:6px;margin-top:10px;background:#222;color:#fff;}
</style>
</head>
<body>

<div class="container">

<h2>ALBAY STEPS • Panel</h2>

<p id="balance">Bakiyeniz: 0 ₺</p>
<button onclick="getBalance()">Bakiyeyi Yenile</button>

<h3>Para Çekme Talebi</h3>
<input type="text" id="iban" placeholder="TR IBAN">
<input type="number" id="amount" placeholder="Tutar">
<button onclick="withdraw()">Talep Gönder</button>

<button onclick="logout()">Çıkış Yap</button>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyKGnhEBtOwlRsuNbAWGP7OFU887akGiQs1jNyXU0IjymIAiu30kNdmhW1fjCxLIrnS/exec";

const email = localStorage.getItem("email") || prompt("Telefon Numaranı Gir:");
localStorage.setItem("email", email);

function getBalance() {
  fetch(API_URL + "?email=" + email)
  .then(r => r.text())
  .then(balance => document.getElementById("balance").innerText = "Bakiyeniz: " + balance + " ₺");
}

function withdraw() {
  let iban = document.getElementById("iban").value;
  let amount = document.getElementById("amount").value;

  fetch(API_URL + "?withdraw=1&email=" + email + "&iban=" + iban + "&amount=" + amount)
  .then(r => r.text())
  .then(msg => alert(msg));
}

function logout() {
  localStorage.removeItem("email");
  location.reload();
}

getBalance();
</script>

</body>
</html>
